module.exports=[4720,a=>{"use strict";a.s(["FileText",()=>b],4720);let b=(0,a.i(70106).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},41675,a=>{"use strict";a.s(["Calendar",()=>b],41675);let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},24669,a=>{"use strict";a.s(["TrendingUp",()=>b],24669);let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},52495,a=>{"use strict";a.s(["ExternalLink",()=>b],52495);let b=(0,a.i(70106).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},77156,a=>{"use strict";a.s(["Eye",()=>b],77156);let b=(0,a.i(70106).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},41710,a=>{"use strict";a.s(["Clock",()=>b],41710);let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},62722,a=>{"use strict";a.s(["XCircle",()=>b],62722);let b=(0,a.i(70106).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},53277,a=>{"use strict";a.s(["TrendingDown",()=>b],53277);let b=(0,a.i(70106).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},84505,a=>{"use strict";a.s(["Download",()=>b],84505);let b=(0,a.i(70106).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},45055,a=>{"use strict";a.s(["default",()=>s]);var b=a.i(87924),c=a.i(72131),d=a.i(91181),e=a.i(91119),f=a.i(86304),g=a.i(99570),h=a.i(10849),i=a.i(77156),j=a.i(41675),k=a.i(24669),l=a.i(53277),m=a.i(4720),n=a.i(16201),o=a.i(41710),p=a.i(62722),q=a.i(52495),r=a.i(84505);function s(){let[a,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)("30d");(0,c.useEffect)(()=>{B()},[x,z]);let B=async()=>{try{w(!0);let a=h.supabase.from("votes").select(`
          id,
          vote_type,
          points,
          evidence_title,
          evidence_description,
          evidence_url,
          evidence_type,
          status,
          created_at,
          moderated_at,
          politician:politicians(name)
        `).order("created_at",{ascending:!1}).limit(100);if(a="all"!==x?a.eq("status",x):a.in("status",["approved","rejected"]),"all"!==z){let b=parseInt(z.replace("d","")),c=new Date;c.setDate(c.getDate()-b),a=a.gte("created_at",c.toISOString())}let{data:b,error:c}=await a;if(c)return void console.error("Error fetching audit records:",c);let d=(b||[]).map(a=>({...a,politician_name:a.politician?.name||"Politicien inconnu"}));s(d);let[e,f]=await Promise.all([h.supabase.from("votes").select("status"),h.supabase.from("politicians").select("id")]);if(e.data&&f.data){let a=e.data;u({total_votes:a.length,pending_votes:a.filter(a=>"pending"===a.status).length,approved_votes:a.filter(a=>"approved"===a.status).length,rejected_votes:a.filter(a=>"rejected"===a.status).length,total_politicians:f.data.length,active_users:0})}}catch(a){console.error("Error fetching data:",a)}finally{w(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(d.Navigation,{}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,b.jsx)(i.Eye,{className:"w-8 h-8 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Transparence et audit"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Consultez l'historique complet des votes et les statistiques de la plateforme"})]})]})}),t&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.total_votes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Votes totaux"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.pending_votes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"En attente"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.approved_votes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Approuvés"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.rejected_votes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Rejetés"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.total_politicians}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Politiciens"})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-4 text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(t.approved_votes/Math.max(t.total_votes-t.pending_votes,1)*100),"%"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Taux approbation"})]})})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("div",{className:"flex space-x-2",children:[{key:"all",label:"Tous"},{key:"approved",label:"Approuvés"},{key:"rejected",label:"Rejetés"}].map(a=>(0,b.jsx)(g.Button,{onClick:()=>y(a.key),variant:x===a.key?"default":"outline",size:"sm",children:a.label},a.key))}),(0,b.jsx)("div",{className:"flex space-x-2",children:[{key:"7d",label:"7 jours"},{key:"30d",label:"30 jours"},{key:"90d",label:"90 jours"},{key:"all",label:"Tout"}].map(a=>(0,b.jsx)(g.Button,{onClick:()=>A(a.key),variant:z===a.key?"default":"outline",size:"sm",children:a.label},a.key))})]}),(0,b.jsxs)(g.Button,{onClick:()=>{let b=new Blob([["Date,Politicien,Type de vote,Points,Titre preuve,Statut,Modéré le",...a.map(a=>[new Date(a.created_at).toLocaleDateString("fr-FR"),a.politician_name,"positive"===a.vote_type?"Positif":"Négatif",a.points,`"${a.evidence_title.replace(/"/g,'""')}"`,a.status,a.moderated_at?new Date(a.moderated_at).toLocaleDateString("fr-FR"):"N/A"].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(b),c.download=`politics-trust-audit-${new Date().toISOString().split("T")[0]}.csv`,c.click()},size:"sm",className:"flex items-center space-x-2",children:[(0,b.jsx)(r.Download,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Exporter CSV"})]})]})}),v?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(e.Card,{className:"animate-pulse",children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})},c))}):0===a.length?(0,b.jsx)(e.Card,{className:"text-center py-12",children:(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)(m.FileText,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun enregistrement trouvé"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Aucun vote correspondant aux critères sélectionnés."})]})}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(e.Card,{className:"hover:shadow-md transition-shadow",children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:a.politician_name}),(0,b.jsxs)(f.Badge,{variant:"outline",className:`${"positive"===a.vote_type?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:["positive"===a.vote_type?(0,b.jsx)(k.TrendingUp,{className:"w-3 h-3 mr-1"}):(0,b.jsx)(l.TrendingDown,{className:"w-3 h-3 mr-1"}),"positive"===a.vote_type?"Positif":"Négatif"," (+",a.points,")"]}),(0,b.jsxs)(f.Badge,{variant:"outline",className:`${"approved"===a.status?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:["approved"===a.status?(0,b.jsx)(n.CheckCircle,{className:"w-3 h-3 mr-1"}):(0,b.jsx)(p.XCircle,{className:"w-3 h-3 mr-1"}),"approved"===a.status?"Approuvé":"Rejeté"]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(j.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:["Soumis le ",new Date(a.created_at).toLocaleDateString("fr-FR")]})]}),a.moderated_at&&(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)(o.Clock,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:["Modéré le ",new Date(a.moderated_at).toLocaleDateString("fr-FR")]})]})]})]})}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.evidence_title}),(0,b.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.evidence_description}),a.evidence_url&&(0,b.jsxs)("a",{href:a.evidence_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-sm text-blue-600 hover:text-blue-800",children:[(0,b.jsx)(q.ExternalLink,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Voir la source"})]})]})]})},a.id))}),(0,b.jsx)(e.Card,{className:"mt-12 border-blue-200 bg-blue-50",children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)(i.Eye,{className:"w-6 h-6 text-blue-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Engagement de transparence"}),(0,b.jsx)("p",{className:"text-blue-800 text-sm",children:"Conformément à nos obligations légales et à notre engagement pour la transparence, tous les votes modérés sont conservés dans cet historique public. Les données personnelles des utilisateurs ne sont jamais exposées. Cet audit trail permet de vérifier l'intégrité de notre processus de modération et la légitimité des scores de crédibilité."})]})]})})})]})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d6113609._.js.map