module.exports=[16683,a=>{"use strict";a.s(["default",()=>w],16683);var b=a.i(87924),c=a.i(72131),d=a.i(91181),e=a.i(91119),f=a.i(86304),g=a.i(99570),h=a.i(73390),i=a.i(10849),j=a.i(39761),k=a.i(24669),l=a.i(53277),m=a.i(60246),n=a.i(70106);let o=(0,n.default)("vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);var p=a.i(50429);let q=(0,n.default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var r=a.i(73570),s=a.i(41710),t=a.i(3314);let u=(0,n.default)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);var v=a.i(84505);function w(){let[a,n]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)("30d"),[A,B]=(0,c.useState)("votes");(0,c.useEffect)(()=>{C()},[y]);let C=async()=>{try{x(!0);let a=parseInt(y.replace(/[^0-9]/g,""))||30,b=new Date;b.setDate(b.getDate()-a);let[c,d,e]=await Promise.all([i.supabase.from("users").select("id"),i.supabase.from("politicians").select("id"),i.supabase.from("votes").select("*")]),f=c.data?.length||0,g=d.data?.length||0,h=e.data||[],j=h.filter(a=>new Date(a.created_at)>=b),k=j.length,l=j.filter(a=>"pending"===a.status).length,m=j.filter(a=>"approved"===a.status).length,o=j.filter(a=>"rejected"===a.status).length,{data:p}=await i.supabase.from("politicians").select("id, name, credibility_score, total_votes").order("credibility_score",{ascending:!1}).limit(10),q=p?.length?Math.round(p.reduce((a,b)=>a+b.credibility_score,0)/p.length):100,r=j.reduce((a,b)=>{let c=b.category||"other";return a[c]=(a[c]||0)+1,a},{}),s=Object.entries(r).map(([a,b])=>({category:a,count:b})),t=new Date(b);t.setDate(t.getDate()-a);let u=h.filter(a=>{let c=new Date(a.created_at);return c>=t&&c<b}),v={totalUsers:f,totalPoliticians:g,totalVotes:k,pendingVotes:l,approvedVotes:m,rejectedVotes:o,averageCredibilityScore:q,topPoliticians:p||[],userEngagement:{dailyActiveUsers:Math.floor(.1*f),weeklyActiveUsers:Math.floor(.3*f),monthlyActiveUsers:Math.floor(.6*f)},votesByCategory:s,moderationStats:{averageProcessingTime:2.5,accuracyRate:.92,moderatorWorkload:[{moderator_name:"Modérateur Principal",votes_processed:45},{moderator_name:"Modérateur Assistant",votes_processed:32}]},trends:{votesThisWeek:k,votesLastWeek:u.length,usersThisWeek:f,usersLastWeek:f}};n(v)}catch(a){console.error("Error fetching analytics:",a)}finally{x(!1)}},D=(a,b)=>{if(0===b)return{value:0,positive:!0};let c=(a-b)/b*100;return{value:Math.abs(Math.round(c)),positive:c>=0}};if(w)return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(d.Navigation,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((a,c)=>(0,b.jsx)("div",{className:"h-32 bg-gray-200 rounded-lg"},c))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg"})]})]})})]});if(!a)return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(d.Navigation,{}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)(e.Card,{className:"text-center py-12",children:(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)(r.AlertTriangle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Erreur de chargement"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Impossible de charger les données d'analyse."})]})})})]});let E=D(a.trends.votesThisWeek,a.trends.votesLastWeek),F=D(a.trends.usersThisWeek,a.trends.usersLastWeek);return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(d.Navigation,{}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(j.BarChart3,{className:"w-8 h-8 text-blue-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics & Reporting"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Tableau de bord des statistiques de la plateforme"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"flex space-x-2",children:[{key:"7d",label:"7 jours"},{key:"30d",label:"30 jours"},{key:"90d",label:"90 jours"},{key:"1y",label:"1 an"}].map(a=>(0,b.jsx)(g.Button,{onClick:()=>z(a.key),variant:y===a.key?"default":"outline",size:"sm",children:a.label},a.key))}),(0,b.jsxs)(g.Button,{onClick:()=>{if(!a)return;let b=new Blob([[["Métrique","Valeur"],["Utilisateurs totaux",a.totalUsers.toString()],["Politiciens totaux",a.totalPoliticians.toString()],["Votes totaux",a.totalVotes.toString()],["Votes en attente",a.pendingVotes.toString()],["Votes approuvés",a.approvedVotes.toString()],["Votes rejetés",a.rejectedVotes.toString()],["Score moyen de crédibilité",a.averageCredibilityScore.toString()]].map(a=>a.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(b),c.download=`politics-trust-analytics-${new Date().toISOString().split("T")[0]}.csv`,c.click()},size:"sm",className:"flex items-center space-x-2",children:[(0,b.jsx)(v.Download,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Exporter"})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Utilisateurs totaux"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalUsers.toLocaleString()})]}),(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:(0,b.jsx)(m.Users,{className:"w-6 h-6 text-blue-600"})})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,b.jsxs)("div",{className:`flex items-center ${F.positive?"text-green-600":"text-red-600"}`,children:[F.positive?(0,b.jsx)(k.TrendingUp,{className:"w-4 h-4 mr-1"}):(0,b.jsx)(l.TrendingDown,{className:"w-4 h-4 mr-1"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[F.value,"%"]})]}),(0,b.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:"vs période précédente"})]})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Votes totaux"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalVotes.toLocaleString()})]}),(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg",children:(0,b.jsx)(o,{className:"w-6 h-6 text-green-600"})})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,b.jsxs)("div",{className:`flex items-center ${E.positive?"text-green-600":"text-red-600"}`,children:[E.positive?(0,b.jsx)(k.TrendingUp,{className:"w-4 h-4 mr-1"}):(0,b.jsx)(l.TrendingDown,{className:"w-4 h-4 mr-1"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[E.value,"%"]})]}),(0,b.jsx)("span",{className:"text-sm text-gray-600 ml-2",children:"vs période précédente"})]})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Score moyen"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[a.averageCredibilityScore,"/200"]})]}),(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg",children:(0,b.jsx)(p.Target,{className:"w-6 h-6 text-purple-600"})})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(h.Progress,{value:a.averageCredibilityScore/200*100,className:"h-2"})})]})}),(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"En attente"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.pendingVotes})]}),(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-lg",children:(0,b.jsx)(s.Clock,{className:"w-6 h-6 text-yellow-600"})})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Temps moyen: ",a.moderationStats.averageProcessingTime,"h"]})})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(u,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("span",{children:"Répartition des votes"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.approvedVotes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Approuvés"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.totalVotes>0?Math.round(a.approvedVotes/a.totalVotes*100):0,"%"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:a.pendingVotes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"En attente"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.totalVotes>0?Math.round(a.pendingVotes/a.totalVotes*100):0,"%"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:a.rejectedVotes}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Rejetés"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.totalVotes>0?Math.round(a.rejectedVotes/a.totalVotes*100):0,"%"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Approuvés"}),(0,b.jsx)("span",{children:a.approvedVotes})]}),(0,b.jsx)(h.Progress,{value:a.totalVotes>0?a.approvedVotes/a.totalVotes*100:0,className:"h-2"}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"En attente"}),(0,b.jsx)("span",{children:a.pendingVotes})]}),(0,b.jsx)(h.Progress,{value:a.totalVotes>0?a.pendingVotes/a.totalVotes*100:0,className:"h-2"}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Rejetés"}),(0,b.jsx)("span",{children:a.rejectedVotes})]}),(0,b.jsx)(h.Progress,{value:a.totalVotes>0?a.rejectedVotes/a.totalVotes*100:0,className:"h-2"})]})]})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(q,{className:"w-5 h-5 text-yellow-600"}),(0,b.jsx)("span",{children:"Top politiciens par crédibilité"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-3",children:a.topPoliticians.slice(0,8).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold ${0===c?"bg-yellow-100 text-yellow-800":1===c?"bg-gray-100 text-gray-800":2===c?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:c+1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-gray-600",children:[a.total_votes," votes"]})]})]}),(0,b.jsxs)(f.Badge,{variant:"outline",className:a.credibility_score>=150?"bg-green-50 text-green-700 border-green-200":a.credibility_score>=100?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200",children:[a.credibility_score,"/200"]})]},a.id))})})]})]}),(0,b.jsxs)(e.Card,{className:"mb-8",children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(j.BarChart3,{className:"w-5 h-5 text-purple-600"}),(0,b.jsx)("span",{children:"Votes par catégorie"})]})}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:a.votesByCategory.map(c=>(0,b.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:c.count}),(0,b.jsx)("div",{className:"text-sm text-gray-600 capitalize",children:"integrity"===c.category?"Intégrité":"competence"===c.category?"Compétence":"transparency"===c.category?"Transparence":"consistency"===c.category?"Cohérence":"leadership"===c.category?"Leadership":"Autre"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[a.totalVotes>0?Math.round(c.count/a.totalVotes*100):0,"%"]})]},c.category))})})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsxs)(e.CardTitle,{className:"flex items-center space-x-2",children:[(0,b.jsx)(t.Shield,{className:"w-5 h-5 text-blue-600"}),(0,b.jsx)("span",{children:"Statistiques de modération"})]})}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[a.moderationStats.averageProcessingTime,"h"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Temps moyen de traitement"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(100*a.moderationStats.accuracyRate),"%"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Taux de précision"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:a.moderationStats.moderatorWorkload.reduce((a,b)=>a+b.votes_processed,0)}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Votes traités"})]})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Charge de travail des modérateurs"}),(0,b.jsx)("div",{className:"space-y-2",children:a.moderationStats.moderatorWorkload.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.moderator_name}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.votes_processed," votes"]})]},a.moderator_name))})]})]})]})]})]})}}];

//# sourceMappingURL=src_app_analytics_page_tsx_5c2fe4d5._.js.map